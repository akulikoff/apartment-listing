@use "../variables" as *;
@use "../mixins" as *;

// Unified Card Styles
.apartment-card {
  // Base styles are in critical.scss to prevent flickering

  &:hover {
    background: color(gray-50);
  }

  // Mobile view is visible by default
  &__mobile {
    display: block;
  }

  // Desktop view is hidden by default
  &__desktop {
    display: none;
  }

  &--loading {
    opacity: 0.7;
    pointer-events: none;
  }

  &__mobile {
    padding: spacing(md);
  }

  &__content {
    display: flex;
    align-items: flex-start;
    gap: spacing(md);
  }

  &__info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: spacing(sm);
  }

  &__title {
    font-family: $font-family-primary;
    font-size: 16px;
    font-weight: 500;
    color: color(gray-900);
    margin: 0;
    line-height: 1.4;
  }

  &__details {
    display: flex;
    align-items: center;
    gap: spacing(md);
    flex-wrap: wrap;
  }

  &__area {
    font-family: $font-family-primary;
    font-size: 16px;
    font-weight: 400;
    color: color(gray-500); // Muted color for secondary info
  }

  &__floor {
    font-family: $font-family-primary;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 4px;

    &-current {
      color: color(gray-500); // Muted color for floor number
      font-weight: 400;
    }

    &-total {
      color: color(gray-400); // Even more muted for "из X"
      font-size: 16px;
      font-weight: 400;
    }
  }

  &__price {
    font-family: $font-family-primary;
    font-size: 16px;
    font-weight: 500; // Slightly bolder for price
    color: color(gray-900); // Keep price prominent
  }

  &__image-wrapper {
    width: 80px;
    height: 80px;
    border-radius: 0; // No border radius
    overflow: hidden;
    flex-shrink: 0;

    // Mobile specific styles
    @include mobile-only {
      width: 66px;
      height: 66px;
    }
  }

  &__image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    opacity: 1 !important; // Prevent fade effects
    transition: none !important; // Disable transitions that cause flickering
    border-radius: 0; // No border radius

    &-placeholder {
      width: 100%;
      height: 100%;
      background: color(gray-100);
      @include center-flex;
      opacity: 1 !important; // Ensure placeholder is always visible

      border-radius: 0; // No border radius

      &-text {
        font-size: 10px;
        color: color(gray-400);
        font-weight: 500;
        text-align: center;
      }
    }
  }
}

// Desktop Table Row Styles (used within apartment-card__desktop)
.apartment-row {
  &__cell {
    display: flex;
    align-items: center;
    font-family: $font-family-primary;

    &--description {
      align-items: flex-start;
    }

    &--photo {
      justify-content: flex-start;
    }

    &--area {
      font-weight: 400;
      color: color(gray-900);
    }

    &--floor {
      font-weight: 400;
      gap: 5px;
    }

    &--price {
      font-weight: 400;
      color: color(gray-900);
    }
  }

  &__description-content {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  &__image-wrapper {
    width: 80px;
    height: 80px;
    padding: 0 14px 14px 14px;
    border-radius: 0;
    @include center-flex;
    flex-shrink: 0;
  }

  &__image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 0;
    opacity: 1 !important;
    transition: none !important;

    &-placeholder {
      width: 100%;
      height: 100%;
      background: color(gray-100);
      border-radius: 0;
      @include center-flex;
      opacity: 1 !important;

      &-text {
        font-size: 10px;
        color: color(gray-400);
        font-weight: 500;
        text-align: center;
      }
    }
  }

  &__title {
    font-size: 16px;
    font-weight: 500;
    color: color(gray-900);
    line-height: 1.4;
    margin-bottom: 2px;
  }

  &__floor {
    &-current {
      color: color(gray-900);
      font-weight: 500;
    }

    &-total {
      color: color(gray-500);
      font-size: 14px;
      font-weight: 400;
    }
  }
}

// Mobile styles (default)
@include mobile-only {
  .apartment-card {
    &__mobile {
      display: block;
      padding: 12px spacing(md);
    }

    &__desktop {
      display: none;
    }

    &__content {
      gap: 12px;
    }

    &__title {
      font-size: 14px;
    }

    &__details {
      gap: 20px;
    }

    &__area {
      font-size: 14px;
      font-weight: 500;
      color: color(gray-900);
    }

    &__floor {
      font-size: 14px;

      &-current {
        color: color(gray-900);
        font-weight: 500;
      }

      &-total {
        font-size: 14px;
        color: color(gray-400);
      }
    }

    &__price {
      font-size: 14px;
      font-weight: 500;
      color: color(gray-900);
    }

    &__image-wrapper {
      width: 66px;
      height: 66px;
    }
  }
}

/* Desktop styles (≥ 960px) */
@media (min-width: 960px) {
  .apartment-card {
    // Base desktop styles are in critical.scss

    &__mobile {
      display: none;
    }

    &__desktop {
      display: grid;
      grid-template-columns: 80px 1fr 100px 120px 140px;
      align-items: start;
      gap: 20px;
      padding: 16px 20px 16px 0;
      background: color(white);
      border-bottom: 1px solid color(gray-100);
      transition: none; // No transitions to prevent flickering

      &:hover {
        background: color(gray-50);
      }

      .apartment-row__image-wrapper {
        width: 80px;
        height: 80px;
        padding: 0;
      }

      .apartment-row__title {
        font-size: 16px;
      }

      .apartment-row__cell {
        &--area {
          font-size: 15px;
        }

        &--floor {
          font-size: 14px;
        }

        &--price {
          font-size: 16px;
        }
      }

      .apartment-row__floor-total {
        font-size: 14px;
      }
    }
  }
}

@include desktop-large-up {
  .apartment-card {
    &__desktop {
      grid-template-columns: 100px 1fr 120px 140px 160px;
      gap: 20px;

      .apartment-row__image-wrapper {
        max-width: 100px;
        height: 100px;
        padding: spacing(md);
      }

      .apartment-row__title {
        font-size: 16px;
      }

      .apartment-row__cell {
        &--area {
          font-size: 16px;
        }

        &--floor {
          font-size: 16px;
        }

        &--price {
          font-size: 16px;
        }
      }

      .apartment-row__floor-total {
        font-size: 16px;
      }
    }
  }
}
